<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Rails, Backbone.js, and Handlebars</title>
  <meta name="description" content="Slides on creating a web application with Rails, Backbone.js, and Handlebars">
  <meta name="author" content="Zachery Moneypenny">

  <!--  Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Core and extension CSS files -->
	<link rel="stylesheet" href="./core/deck.core.css">
	<link rel="stylesheet" href="./extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="./extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="./extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="./extensions/status/deck.status.css">
	<link rel="stylesheet" href="./extensions/hash/deck.hash.css">

	<!-- Theme CSS files (menu swaps these out) -->
	<link rel="stylesheet" id="style-theme-link" href="./themes/style/swiss.css">
	<link rel="stylesheet" id="transition-theme-link" href="./themes/transition/horizontal-slide.css">

	<link rel="stylesheet" href="./css/common.css">

  <script src="./modernizr.custom.js"></script>
</head>

<body class="introduction" >
  <header>
  	<nav>
  		<h1><a href="../">Rails + Backbone.js + Handlebars</a></h1>
  	</nav>
  </header>

  <article class="deck-container">
  	<section class="slide" id="title">
  		<h1>Building Apps With<br/>Rails, Backbone.js, and Handlebars</h1>
  	</section>

  	<section class="slide" id="whoami">
  	  <h1>I'm Zachery Moneypenny, and learning Javascript MVC ain't Easy</h1>
  	</section>

  	<section class="slide" id="options-options">
  		<h2>Framework Options They Are A-Pilin' Up</h2>
  		<ul>
  		  <li><h3>Backbone.js</h3></li>
  		  <li><h3>Angular.js</h3></li>
  		  <li><h3>Ember.js</h3></li>
  		  <li><h3>And on and one and on...</h3></li>
  		</ul>
  		<h2>Next Up: Our Templating Options</h2>
  		<ul>
  		  <li><h3>Underscore.js</h3></li>
  		  <li><h3>Mustache.js</h3></li>
  		  <li><h3>Handlebars.js</h3></li>
  		  <li><h3>sigh...</h3></li>
  		</ul>
  	</section>

  	<section class="slide" id="tutorial-jamboree">
  		<h2>Todo: Implement Todo Tutorial</h2>
  		<iframe src="http://documentcloud.github.com/backbone/examples/todos/index.html" style="width:90%;height:450px;"></iframe>
  	</section>

  	<section class="slide" id="make-the-jump">
  	  <h1>The Transition</h1>
  	</section>

  	<section class="slide" id="coupla-questions">
  	  <h2>Ok, Coupla Questions...</h2>
  	  <ul>
  	    <li class="slide" id="question-source"><h3>What are some useful gems?</h3></li>
  	    <li class="slide" id="question-source"><h3>How does the source fit into my app?</h3></li>
  	    <li class="slide" id="question-relationships"><h3>How do I model relationships in Javascript?</h3></li>
  	    <li class="slide" id="question-controllers"><h3>How do I write controllers to work with Javascript MVC frameworks?</h3></li>
  	    <li class="slide" id="question-guidelines"><h3>What are some good guidelines for bootstrapping a Javascript MVC app?</h3></li>
  	    <li class="slide" id="question-handlebars"><h3>How do I use Handlebars templates instead of Underscore?</h3></li>
  	  </ul>
  	</section>

  	<section class="slide" id="what-gems">
  	  <h2>Useful Gems!</h2>

      <h3>backbone-rails (https://github.com/codebrew/backbone-rails)</h3>
      <ul>
        <li><h4>Overrides the <tt>Backbone.sync</tt> method to work with Rails routes</h4></li>
        <li><h4>Provides helpful rails generators</h4></li>
  	  </ul>

  	  <h3>handlebars_assets (https://github.com/leshill/handlebars_assets)</h3>
      <ul>
        <li><h4>Use handlebars.js templates with the asset pipeline and sprockets</h4></li>
  	  </ul>
  	</section>

  	<section class="slide" id="where-source">
  	  <h2>How does the source fit into my app?</h2>
      <pre>
/app
 |- /assets
      |- /javascripts
             |- application.js
             |- /backbone
                    |- health-diary.js.coffee
                    |- /models
                    |     |- diary_entry.js.coffee
                    |     |- ...
                    |- /routers
                    |     |- diary_entry_router.js.coffee
                    |- /templates
                    |     |- /diary_entries
                    |     |        |- show.jst.hbs
                    |     |        |- show_notes.jst.hbs
                    |     |        |- ...
                    |     |- ...
                    |- /views
                          |- /diary_entries
                                   |- show_view.js.coffee
                                   |- ...</pre>
  	</section>

  	<section class="slide" id="relationship-halp">
      <h2>Nested models!</h2>
      <img src="./images/halp.jpg" border="0" />
  	</section>

  	<section class="slide" id="relationship-advice">
  	  <h2>Backbone-relational</h2>
  	  <h3>https://github.com/PaulUithol/Backbone-relational</h3>
  	</section>

  	<section class="slide" id="relationship-defined">
  	  <h2>Defining Model Relationships</h2>
  	  <pre>
class HealthDiary.Models.DiaryEntry extends Backbone.RelationalModel
 relations: [{
   type: Backbone.HasMany,
   key: "reminders",
   relatedModel: "HealthDiary.Models.Reminder",
   collectionType: "HealthDiary.Collections.RemindersCollection",
   reverseRelation: {
     key: "diary_entry"
   }
 }]</pre>
      <h3>Your model now has Super Relationship Powers!</h3>
      <ul>
        <li><h3><tt>fetchRelated</tt> method to get sub-collections</h3></li>
        <li><h3><tt>add</tt>, <tt>remove</tt>, and <tt>update</tt> events exposed on model</h3></li>
        <li><h3>and more! Docs are great on github.</h3></li>
      </ul>
  	</section>

  	<section class="slide" id="controller-design">
      <h2>Optimizing Controllers for Backbone Models</h2>
      <h3>Use <tt>respond_to</tt> and <tt>respond_with</tt>....</h3>
      <pre>
class RemindersController < ApplicationController
    respond_to :json

    def show
      reminder = Reminder.find(params[:id])
      respond_with @diary_entry, reminder
    end

    ...
end</pre>
  </section>

  <section class="slide" id="setting-the-url">
    <h2>Optimizing Controllers for Backbone Models</h2>
    <h3>...and set the <tt>url</tt> property on the model and collection</h3>
    <pre>
class HealthDiary.Models.Reminder extends Backbone.RelationalModel
  paramRoot: 'reminder'

  url: ->
    if @isNew()
      "/diary_entries/"+@get("diary_entry_id")+"/reminders.json"
    else
      "/diary_entries/"+@get("diary_entry_id")+"/reminders/"+@get("id")+".json"


class HealthDiary.Collections.RemindersCollection extends Backbone.Collection
  model: HealthDiary.Models.Reminder

  url: ->
    "/diary_entries/"+@diary_entry.get("id")+"/reminders.json"</pre>
  	</section>

  	<section class="slide" id="guidelines-overview">
  	  <h1>ADVICE!</h1>
  	</section>

    <section class="slide" id="guidelines-overview">
      <h2>If you're just getting started...</h2>
      <h3 class="slide">Pick and choose workflows to javascript-ize</h3>
      <h3 class="slide">For each major workflow, start with a container view (ex: DiaryEntryWorkflow)</h3>
      <h3 class="slide">Work outside in, views-wise, and refactor once things work</h3>
      <h3 class="slide">Once working, aggressively reduce complexity, per-view</h3>
      <h3 class="slide">Look for opportunities to widget-ize small views</h3>
      <h3 class="slide">Prefer event-binding opportunities to stuffing everything in a view's render() method</h3>
      <h3 class="slide">Keep away from DOM manipulation outside of views (and take care inside!)</h3>
  	</section>

  	<section class="slide" id="handlebars-intro">
  	  <h1><tt>:{</tt></h1>
  	</section>

  	<section class="slide" id="handlebars-overview">
  	  <h2>What's Handlebars Got That I Ain't?</h2>
      <h3>Block helpers for handling collections</h3>
      <pre>
&lt;ul class="people_list"&gt;
  {{#each people}}
  &lt;li&gt;{{first_name}} {{last_name}}&lt;/li&gt;
  {{/each}}
&lt;/ul&gt;</pre>
      <h3>Partials</h3>
      <pre>
&lt;script id="people-template" type="text/x-handlebars-template"&gt;
  {{#each people}}
    {{&gt; person}}
  {{/each}}
&lt;/script&gt;

&lt;script id="person-partial" type="text/x-handlebars-template"&gt;
  &lt;h2&gt;{{first_name}} {{last_name}}&lt;/h2&gt;
&lt;/script&gt;</pre>
  	</section>

  	<section class="slide" id="handlebars-overview-2">
  	  <h2>What's Handlebars Got That I Ain't?</h2>
      <h3>Simple control-flow block helpers</h3>
      <pre>
&lt;script id="fitbit-account-template" type="text/x-handlebars-template"&gt;
  {{#if integrated_with_fitbit}}
    &lt;div&gt;Fitbit user id: {{account.fitbit_id}}&lt;/div&gt;
  {{/if}}

  {{#unless integrated_with_fitbit}}
    &lt;div&gt;&lt;a href="/sync/new"&gt;Connect to Fitbit.com&lt;/a&gt;&lt;/div&gt;
  {{/unless}}
&lt;/script&gt;
      </pre>
  	</section>

  	<section class="slide" id="wrap-up">
  	 <h2>See You on the Funny Pages</h2>

     <ul id="contact-list">
       <li>See the work-in-progress at <a href="http://liftr.herokuapp.com">http://liftr.herokuapp.com</a></li>
       <li>I'm <a href="http://twitter.com/whazzmaster">@whazzmaster on Twitter</a></li>
    	 <li>My code is at <a href="http://github.com/whazzmaster">github.com/whazzmaster</a></li>
    	 <li>Don't ever go to <a href="http://whazzmaster.com">whazzmaster.com</a></li>
    	 <li>Go to <a href="http://whazzing.com">whazzing.com</a></li>
       <li>Please use TurboTax!</li>
     </ul>
  	</section>
  </article>

  <style>
  section#handlebars-intro h1 {
    -webkit-transform: rotate(90deg);
    font-size: 8em;
    padding-right: 2em;
  }
  ul#contact-list {
    list-style: square;
    font-size: 2em;
  }
  </style>

  <!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="./jquery-1.7.min.js"><\/script>')</script>

  <!-- Deck Core and extensions -->
  <script src="./core/deck.core.js"></script>
  <script src="./extensions/hash/deck.hash.js"></script>
  <script src="./extensions/menu/deck.menu.js"></script>
  <script src="./extensions/goto/deck.goto.js"></script>
  <script src="./extensions/status/deck.status.js"></script>
  <script src="./extensions/navigation/deck.navigation.js"></script>

  <script>
    $(function() {
    	// Deck initialization
    	$.deck('.slide');
    });
  </script>

</body>
</html>